<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BattleScript</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⚔️</text></svg>">
</head>
<body>
    <!-- Частицы на фоне -->
    <div id="particles"></div>
    
    <!-- Индикатор загрузки -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Подключение к серверу...</div>
            <div class="loading-details" id="loadingDetails"></div>
        </div>
    </div>
    
    <!-- Главный экран -->
    <div id="mainScreen" class="screen active-screen">
        <header class="main-header">
            <div class="title-container">
                <h1 class="game-title">
                    <i class="fas fa-crosshairs"></i> 
                    <span class="title-text">BattleScript</span>
                </h1>
                <p class="game-subtitle">Тактическая карточная дуэль 1 на 1</p>
            </div>
        </header>
        
        <main class="main-content">
            <div class="server-status-card">
                <div class="status-header">
                    <i class="fas fa-server"></i>
                    <h3>Статус сервера</h3>
                </div>
                <div class="status-body">
                    <div class="connection-info">
                        <div class="info-row">
                            <span class="info-label">Адрес:</span>
                            <span class="info-value" id="serverAddress">Подключение...</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Статус:</span>
                            <div class="connection-status" id="connectionStatus">
                                <i class="fas fa-plug"></i>
                                <span>Ожидание подключения</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="server-stats">
                        <div class="stat-item">
                            <i class="fas fa-users"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="onlinePlayers">0</span>
                                <span class="stat-label">онлайн</span>
                            </div>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-cards"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="totalCards">0</span>
                                <span class="stat-label">карт</span>
                            </div>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-bolt"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="activeGames">0</span>
                                <span class="stat-label">игры</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="player-section">
                <div class="player-card" id="playerCard">
                    <div class="player-card-header">
                        <h3><i class="fas fa-user"></i> Ваш профиль</h3>
                    </div>
                    <div class="player-card-body">
                        <div class="player-info" id="playerInfo">
                            <div class="info-row">
                                <span class="info-label">Имя:</span>
                                <span class="info-value" id="playerNameDisplay">-</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Аватар:</span>
                                <div class="avatar-display" id="avatarDisplay">
                                    <div class="avatar-icon">
                                        <i class="fas fa-user-warrior default-avatar"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Статус:</span>
                                <span class="status-badge disconnected" id="playerStatus">
                                    <i class="fas fa-sign-out-alt"></i> Не в игре
                                </span>
                            </div>
                        </div>
                        <div class="player-actions">
                            <button class="btn btn-primary" id="enterNameBtn">
                                <i class="fas fa-sign-in-alt"></i> Войти в игру
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="quick-actions">
                    <button class="quick-action-btn" id="quickJoinBtn">
                        <i class="fas fa-play-circle"></i>
                        <span>Быстрый старт</span>
                    </button>
                    <button class="quick-action-btn" id="findOpponentBtn">
                        <i class="fas fa-search"></i>
                        <span>Найти противника</span>
                    </button>
                    <button class="quick-action-btn" id="spectateBtn">
                        <i class="fas fa-eye"></i>
                        <span>Наблюдать</span>
                    </button>
                </div>
            </div>
            
            <div class="game-info">
                <div class="info-card">
                    <h3><i class="fas fa-info-circle"></i> Правила игры</h3>
                    <div class="rules-list">
                        <div class="rule-item">
                            <i class="fas fa-users"></i>
                            <div>
                                <strong>1 на 1</strong>
                                <p>Только два игрока, остальные наблюдают</p>
                            </div>
                        </div>
                        <div class="rule-item">
                            <i class="fas fa-cards"></i>
                            <div>
                                <strong>Карты артефактов</strong>
                                <p>Выполняйте квесты для получения артефактов</p>
                            </div>
                        </div>
                        <div class="rule-item">
                            <i class="fas fa-clock"></i>
                            <div>
                                <strong>Быстрая игра</strong>
                                <p>Ход - 2 минуты, игра - до победы</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="cards-preview">
                    <h3><i class="fas fa-crown"></i> Лучшие карты</h3>
                    <div class="preview-cards" id="topCards">
                        <!-- Карты будут загружены через JS -->
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Экран игры -->
    <div id="gameScreen" class="screen">
        <div class="game-header">
            <div class="game-info-left">
                <div class="game-title-small">
                    <i class="fas fa-crosshairs"></i> 
                    <span>BattleScript</span>
                </div>
                <div class="player-display">
                    <span class="player-name" id="gamePlayerName">-</span>
                    <span class="player-badge" id="gamePlayerBadge">Игрок</span>
                </div>
            </div>
            
            <div class="game-state">
                <div class="turn-indicator" id="turnIndicator">
                    <i class="fas fa-hourglass-half"></i>
                    <span>Ожидание игры...</span>
                </div>
                <div class="game-timer" id="gameTimer">
                    <i class="fas fa-clock"></i>
                    <span>02:00</span>
                </div>
                <div class="artifact-quest">
                    <i class="fas fa-scroll"></i>
                    <span id="currentQuest">Квест: -</span>
                </div>
            </div>
            
            <div class="game-controls-top">
                <button class="icon-btn" id="menuBtn" title="Меню">
                    <i class="fas fa-bars"></i>
                </button>
                <button class="icon-btn" id="soundBtn" title="Звук">
                    <i class="fas fa-volume-up"></i>
                </button>
                <button class="icon-btn btn-exit" id="exitGameBtn" title="Выйти">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </div>
        
        <!-- Игровое поле -->
        <div class="game-board">
            <!-- Противник (сверху) -->
            <div class="opponent-section">
                <div class="player-header opponent-header" id="opponentHero">
                    <div class="player-identity">
                        <div class="avatar-container" id="opponentAvatar">
                            <i class="fas fa-user-warrior opponent-icon"></i>
                        </div>
                        <div class="player-info">
                            <div class="player-name" id="opponentName">Противник</div>
                            <div class="player-status" id="opponentStatus">Ожидание...</div>
                        </div>
                    </div>
                    
                    <div class="player-stats">
                        <div class="stat-display mana-display">
                            <i class="fas fa-gem"></i>
                            <div class="stat-value">
                                <span id="opponentMana">3</span>
                                <span class="stat-separator">/</span>
                                <span id="opponentMaxMana">3</span>
                            </div>
                        </div>
                        <div class="stat-display health-display">
                            <i class="fas fa-heart"></i>
                            <div class="stat-value">
                                <span id="opponentHealth">30</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="board-section opponent-board">
                    <div class="board-title">
                        <i class="fas fa-chess-board"></i>
                        <span>Поле противника</span>
                    </div>
                    <div class="board-grid" id="opponentBoardGrid">
                        <!-- 5 ячеек для карт противника -->
                        <div class="board-cell cell-1 special-cell" data-cell="1" title="Ячейка 1: Немедленная атака"></div>
                        <div class="board-cell cell-2" data-cell="2"></div>
                        <div class="board-cell cell-3" data-cell="3"></div>
                        <div class="board-cell cell-4" data-cell="4"></div>
                        <div class="board-cell cell-5 special-cell" data-cell="5" title="Ячейка 5: Скрытность"></div>
                    </div>
                </div>
                
                <div class="hand-section opponent-hand">
                    <div class="hand-title">
                        <i class="fas fa-hand-paper"></i>
                        <span>Рука противника (<span id="opponentHandCount">0</span>)</span>
                    </div>
                    <div class="hand-container" id="opponentHand">
                        <!-- Рука противника -->
                    </div>
                </div>
            </div>
            
            <!-- Центральная линия -->
            <div class="battle-line">
                <div class="artifact-deck">
                    <i class="fas fa-treasure-chest"></i>
                    <span>Колода артефактов</span>
                    <span class="artifact-count" id="artifactDeckCount">0</span>
                </div>
            </div>
            
            <!-- Игрок (снизу) -->
            <div class="player-section-game">
                <div class="hand-section player-hand">
                    <div class="hand-title">
                        <i class="fas fa-hand-paper"></i>
                        <span>Ваша рука (<span id="playerHandCount">0</span>)</span>
                    </div>
                    <div class="hand-container" id="playerHand">
                        <!-- Рука игрока -->
                    </div>
                </div>
                
                <div class="board-section player-board">
                    <div class="board-title">
                        <i class="fas fa-chess-board"></i>
                        <span>Ваше поле</span>
                    </div>
                    <div class="board-grid" id="playerBoardGrid">
                        <!-- 5 ячеек для карт игрока -->
                        <div class="board-cell cell-1 special-cell" data-cell="1" title="Ячейка 1: Немедленная атака"></div>
                        <div class="board-cell cell-2" data-cell="2"></div>
                        <div class="board-cell cell-3" data-cell="3"></div>
                        <div class="board-cell cell-4" data-cell="4"></div>
                        <div class="board-cell cell-5 special-cell" data-cell="5" title="Ячейка 5: Скрытность"></div>
                    </div>
                </div>
                
                <div class="player-header player-header-game" id="playerHero">
                    <div class="player-identity">
                        <div class="avatar-container" id="playerAvatar">
                            <i class="fas fa-user-warrior player-icon"></i>
                        </div>
                        <div class="player-info">
                            <div class="player-name" id="gameCurrentPlayerName">Вы</div>
                            <div class="player-status" id="playerGameStatus">Ожидание хода...</div>
                        </div>
                    </div>
                    
                    <div class="player-stats">
                        <div class="stat-display mana-display">
                            <i class="fas fa-gem"></i>
                            <div class="stat-value">
                                <span id="playerMana">3</span>
                                <span class="stat-separator">/</span>
                                <span id="playerMaxMana">3</span>
                            </div>
                        </div>
                        <div class="stat-display health-display">
                            <i class="fas fa-heart"></i>
                            <div class="stat-value">
                                <span id="playerHealth">30</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Панель управления -->
        <div class="control-panel">
            <div class="control-grid">
                <button class="control-btn btn-attack" id="attackBtn">
                    <i class="fas fa-fist-raised"></i>
                    <span>Атаковать</span>
                </button>
                
                <button class="control-btn btn-play" id="playCardBtn">
                    <i class="fas fa-play"></i>
                    <span>Играть карту</span>
                </button>
                
                <button class="control-btn btn-auto" id="autoAttackBtn">
                    <i class="fas fa-robot"></i>
                    <span>Авто-атака</span>
                </button>
                
                <button class="control-btn btn-end-turn" id="endTurnBtn">
                    <i class="fas fa-forward"></i>
                    <span>Завершить ход</span>
                </button>
                
                <button class="control-btn btn-artifact" id="useArtifactBtn">
                    <i class="fas fa-magic"></i>
                    <span>Исп. артефакт</span>
                </button>
            </div>
        </div>
        
        <!-- Боковая панель -->
        <div class="side-panel">
            <div class="panel-section game-log">
                <div class="panel-header">
                    <i class="fas fa-scroll"></i>
                    <h4>Журнал боя</h4>
                </div>
                <div class="log-container" id="gameLog">
                    <!-- Сообщения журнала -->
                </div>
            </div>
            
            <div class="panel-section artifact-section">
                <div class="panel-header">
                    <i class="fas fa-treasure-chest"></i>
                    <h4>Ваши артефакты</h4>
                </div>
                <div class="artifact-container" id="artifactContainer">
                    <!-- Артефакты игрока -->
                </div>
            </div>
            
            <div class="panel-section chat-section">
                <div class="panel-header">
                    <i class="fas fa-comments"></i>
                    <h4>Чат</h4>
                </div>
                <div class="chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <!-- Сообщения чата -->
                    </div>
                    <div class="chat-input">
                        <input type="text" id="chatInput" placeholder="Введите сообщение..." 
                               maxlength="200">
                        <button class="icon-btn" id="sendChatBtn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Модальные окна -->
    <div id="nameModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3><i class="fas fa-user-edit"></i> Вход в игру</h3>
                <button class="modal-close" id="closeNameModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="avatar-selection">
                    <h4>Выберите аватар:</h4>
                    <div class="avatars-grid" id="avatarsGrid">
                        <!-- Аватары будут добавлены через JS -->
                    </div>
                </div>
                <div class="name-input-section">
                    <p>Введите ваше имя для игры:</p>
                    <div class="input-group">
                        <input type="text" id="nameInput" 
                               placeholder="Ваше имя"
                               maxlength="20">
                        <div class="input-hint">Максимум 20 символов</div>
                    </div>
                    <div class="name-suggestions">
                        <button class="suggestion-btn" data-name="Воин">Воин</button>
                        <button class="suggestion-btn" data-name="Маг">Маг</button>
                        <button class="suggestion-btn" data-name="Стрелок">Стрелок</button>
                        <button class="suggestion-btn" data-name="Защитник">Защитник</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelNameBtn">Отмена</button>
                <button class="btn btn-primary" id="confirmNameBtn">Войти</button>
            </div>
        </div>
    </div>
    
    <div id="gameMenuModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3><i class="fas fa-bars"></i> Меню игры</h3>
                <button class="modal-close" id="closeMenuModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="menu-options">
                    <button class="menu-option" id="resumeGameBtn">
                        <i class="fas fa-play"></i>
                        <span>Продолжить игру</span>
                    </button>
                    <button class="menu-option" id="rulesBtn">
                        <i class="fas fa-book"></i>
                        <span>Правила</span>
                    </button>
                    <button class="menu-option" id="settingsBtn">
                        <i class="fas fa-cog"></i>
                        <span>Настройки</span>
                    </button>
                    <button class="menu-option" id="returnToMainBtn">
                        <i class="fas fa-home"></i>
                        <span>Выйти в меню</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Аудио элементы -->
    <audio id="soundClick" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="soundCardPlay" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-magic-spell-479.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="soundAttack" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-sword-slash-2768.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Подключаем конфигурацию и скрипты -->
    <script src="config.js"></script>
    <script src="client.js"></script>
</body>
</html>